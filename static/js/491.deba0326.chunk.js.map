{"version":3,"file":"static/js/491.deba0326.chunk.js","mappings":"2LACA,GAAgB,gBAAkB,yCAAyC,IAAM,8B,8BCDpEA,EAAa,SAACC,GACvB,OAAOA,EAAMC,YAAYC,SAEhBC,EAAY,SAACH,GACtB,OAAOA,EAAMI,KAAKC,QAETC,EAAY,SAACN,GACtB,OAAOA,EAAMC,YAAYM,Q,SCFhBC,EAAgB,SAACC,GAC1B,IAAMC,GAAWC,EAAAA,EAAAA,MAEXJ,GAASK,EAAAA,EAAAA,IAAYN,GAM3B,GAA8BO,EAAAA,EAAAA,WAAS,GAAvC,eAAKC,EAAL,KAAeC,EAAf,KACA,GAAiCF,EAAAA,EAAAA,UAASN,GAA1C,eAAKS,EAAL,KAAoBC,EAApB,KA0BI,OAJJC,EAAAA,EAAAA,YAAW,WACPD,EAAUV,KACX,CAACE,EAAMF,UAGF,yBACMO,GACI,0BACE,kBAAOK,SAbR,SAACC,GAChBH,EAAUG,EAAEC,cAAcC,QAYqBC,WAAW,EAAMC,OAtB3C,WACrB,KAdiB,SAACjB,GACXG,GAASe,EAAAA,EAAAA,IAAkBlB,IAc9BmB,CAAaV,GACbD,GAAY,GACd,SACEY,MAAO,gBAiBiFL,MAAON,OAErF,0BACE,iBAAOY,cAhCJ,WACfnB,EAAMoB,UACNd,GAAY,GACZe,QAAQC,IAAIjB,KA6BA,SAA0CP,GAAU,uB,UCA5E,EArCkB,WACd,IAeIyB,EAfE9B,GAAUU,EAAAA,EAAAA,IAAYb,GAGtB8B,IADOI,EAAAA,EAAAA,MACWC,GAElBxB,GAAWC,EAAAA,EAAAA,MAmBjB,OAHIqB,EALC9B,EAEOA,EAAQiC,OAAOC,MAGdlC,EAAQiC,OAAOC,MAFfC,EAFAC,GAQT,iBAAKC,UAAWC,EAAAA,gBAAhB,WACI,yBACCX,IAAW,kBAAOV,SAjBC,SAACC,GAHH,IAACqB,EAAAA,EAILrB,EAAEsB,OAAOC,MAAM,GAH1BjC,GAASkC,EAAAA,EAAAA,IAAUH,KAmB4BI,KAAK,YAGvD,gBAAKC,IAAKd,KAEV,SAACxB,EAAD,CAAeqB,QAASA,QC3CpC,EAAwB,uBCAxB,EAAuB,mBAAvB,EAAqD,uBAArD,EAAuF,uBAAvF,EAA0H,wBCyC1H,EAlCa,SAACpB,GAEV,IAEIuB,EACAe,EAHE7C,GAAUU,EAAAA,EAAAA,IAAYb,GAe5B,OAXKG,EAGOA,EAAQiC,OAAOC,OAGvBJ,EAAS9B,EAAQiC,OAAOC,MACxBW,EAAW7C,EAAQ8C,UAHnBhB,EAASK,GAHTL,EAASM,EACTS,EAAW,cAUX,iBAAKR,UAAWC,EAAhB,WACI,gBAAKD,UAAWC,EAAaM,IAAKd,KAClC,iBAAKO,UAAU,WAAf,WACI,gBAAKA,UAAWC,EAAhB,SAA6BO,KAC7B,gBAAKR,UAAWC,EAAhB,SAA6B/B,EAAMwC,WACnC,4BACI,oCAAYxC,EAAMyC,eAClB,6BCCpB,EA5Bc,SAACzC,GAEX,IAAI0C,EAAQ1C,EAAM0C,MAAMC,KAAI,SAAAC,GAAE,OAAI,SAAC,EAAD,CAAQC,KAAMD,EAAGC,KAAMJ,WAAYG,EAAGH,WAAYD,QAASI,EAAGJ,aAC5FM,EAAiBC,EAAAA,YAUrB,OACI,iBAAKC,MAAO,CAACC,MAAO,KAApB,WACI,uCAEI,qBAAUvC,SATtB,WACI,IAAIwC,EAAOJ,EAAeK,QAAQtC,MAClCb,EAAMoD,QAAQF,IAOuBG,IAAKP,EAAgBjC,MAAOb,EAAMsD,eAC/D,mBAAQC,QAdpB,WACIvD,EAAMwD,UACNV,EAAeK,QAAQtC,MAAQ,KAYvB,0BAEJ,gBAAKiB,UAAWC,EAAhB,SACKW,QCSjB,GAFuBe,EAAAA,EAAAA,KAdD,SAAClE,GACnB,MAAO,CACHmE,MAAOnE,EAAMC,YAAYmE,UACzBL,YAAa/D,EAAMC,YAAY8D,YAC/BZ,MAAOnD,EAAMC,YAAYmE,cAGR,SAAC1D,GACtB,MAAO,CACHuD,QAAS,WAAOvD,EAAS2D,EAAAA,GAAAA,yBACzBR,QAAS,SAACF,GAAkBjD,EAAS2D,EAAAA,GAAAA,qBAA6BV,QAInDO,CAA4FI,GCzBxGC,EAAc,WACrB,IACM1C,IADOI,EAAAA,EAAAA,MACWC,GAExB,OACI,0BAEI,iBAAKK,UAAU,cAAf,WACI,SAAC,EAAD,CAAiBV,QAASA,KAC1B,SAAC,EAAD,U,oBCwDhB,GAHuBqC,EAAAA,EAAAA,KA5CD,SAAClE,GACnB,MAAQ,CACJE,QAASH,EAAWC,GACpBK,OAAQF,EAAUH,GAClBO,OAAQD,EAAUN,MAyCrB,CAAEwE,oBAAAA,EAAAA,GAAqBC,eAAAA,EAAAA,GAAgBhD,kBAAAA,EAAAA,GAAmBmB,UAAAA,EAAAA,IADxCsB,EACqDQ,EAAAA,EAAAA,IApC5B,SAACjE,GAC7C,IAAIyB,EACAyC,GAAS1C,EAAAA,EAAAA,MAoBb,OAnBAf,EAAAA,EAAAA,YAAU,WACFyD,EAAOzC,IACPA,EAAK0C,OAAOD,EAAOzC,IACnBzB,EAAM+D,oBAAoBtC,GAC1BzB,EAAMgE,eAAevC,IAErB2C,EAAAA,GAAAA,aACKC,MAAK,SAAAC,GAC+B,IAA7BA,EAASC,KAAKC,aAEd/C,EAAK6C,EAASC,KAAKA,KAAK9C,GACxBzB,EAAM+D,oBAAoBtC,GAC1BzB,EAAMgE,eAAevC,SAKtC,CAACyC,EAAOzC,MAIP,0BACI,SAAC,GAAD,gBAAaU,UAAWnC,EAAMmC,WAAenC,GAA7C,IACIoB,SAAU+C,OAAOD,EAAOzC,IACxBhC,QAASO,EAAMP,QACfK,OAAQE,EAAMF,OACdmB,aAAcjB,EAAMgB,kBACpBpB,OAAQI,EAAMJ,iB,wIC/DjBqE,EAAmB,SAACQ,GAAe,IACtCC,EADqC,0IAEvC,WACI,OAAKC,KAAK3E,MAAMJ,QACT,SAAC6E,GAAD,UAAeE,KAAK3E,SADI,SAAC,KAAD,CAAU4E,GAAG,gBAHT,GACX7B,EAAAA,WAMhC,OAAO2B,I","sources":["webpack://my-app/./src/components/Profile/currentUserInfo.module.css?17f4","selectors/profileSelector.js","components/Profile/Status.js","components/Profile/currentUserInfo.js","webpack://my-app/./src/components/Profile/MyPosts/Myposts.module.css?a087","webpack://my-app/./src/components/Profile/MyPosts/Post/Post.module.css?87e6","components/Profile/MyPosts/Post/Post.js","components/Profile/MyPosts/Myposts.js","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.js","components/Profile/ProfileContainer.tsx","hoc/AuthRedirect.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"currentUserInfo\":\"currentUserInfo_currentUserInfo__yLLCu\",\"img\":\"currentUserInfo_img__8bHXx\"};","export const getProfile = (state) => {\r\n    return state.profilePage.profile\r\n}\r\nexport const getIsAuth = (state) => {\r\n    return state.auth.isAuth\r\n}\r\nexport const getStatus = (state) => {\r\n    return state.profilePage.status\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { getStatus } from '../../selectors/profileSelector'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { updateStatusThunk } from '../../redux/profile-reducer.ts'\r\n\r\nexport const ProfileStatus = (props) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const status = useSelector(getStatus)\r\n\r\n    const updateStatus = (status) => {\r\n        return dispatch(updateStatusThunk(status))\r\n    }\r\n\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [currentStatus, setStatus] = useState(status)\r\n    let activateEditmode = () => {\r\n        if (props.isOwner) {\r\n            setEditMode(true)\r\n            console.log(editMode);\r\n        }\r\n\r\n    }\r\n    let deactivateEditMode = () => {\r\n        try {\r\n            updateStatus(currentStatus)\r\n            setEditMode(false)\r\n        } catch {\r\n            alert ('some error')\r\n        }\r\n\r\n    }\r\n    let changeStatus = (e) => {\r\n        setStatus(e.currentTarget.value)\r\n\r\n    }\r\n\r\n    useEffect (() => {\r\n        setStatus(status)\r\n    }, [props.status])\r\n\r\n        return (\r\n            <div>\r\n                {(editMode)\r\n                    ? <div>\r\n                        <input onChange={changeStatus} autoFocus={true} onBlur={deactivateEditMode} value={currentStatus}></input>\r\n                    </div>\r\n                    : <div>\r\n                        <span  onDoubleClick={activateEditmode} >{status || '-------------'}</span>\r\n                    </div>\r\n                }\r\n\r\n\r\n            </div>\r\n        )\r\n\r\n}","import React from \"react\"\r\nimport s from './currentUserInfo.module.css'\r\nimport preloaderImg from '../../images/preloader.gif'\r\nimport userDefaultImage from '../../images/user.png'\r\nimport { ProfileStatus } from \"./Status\"\r\nimport { getProfile } from '../../selectors/profileSelector'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { savePhoto } from '../../redux/profile-reducer.ts'\r\nimport { useParams } from 'react-router-dom'\r\n\r\n\r\nlet CurrentUser = () => {\r\n    const profile = useSelector(getProfile)\r\n\r\n    let params = useParams()\r\n    const isOwner = !params.id\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const savePhotoFunction = (file) => {\r\n        return dispatch(savePhoto(file))\r\n    }\r\n    const onMainPhotoSelected = (e) => {\r\n        savePhotoFunction(e.target.files[0])\r\n    }\r\n\r\n\r\n    let imgSrc;\r\n    if (!profile) {\r\n        imgSrc = preloaderImg\r\n    } else if (!profile.photos.large) {\r\n        imgSrc = userDefaultImage\r\n    } else {\r\n        imgSrc = profile.photos.large\r\n    }\r\n\r\n    return (\r\n        <div className={s.CurrentUserInfo}>\r\n            <div>\r\n            {isOwner && <input onChange={onMainPhotoSelected} type='file' />}\r\n            </div>\r\n\r\n            <img src={imgSrc} />\r\n\r\n            <ProfileStatus isOwner={isOwner} />\r\n        </div>)\r\n}\r\n\r\nexport default CurrentUser;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"posts\":\"Myposts_posts__6nWFK\"};","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"Post_item__8kCq6\",\"userName\":\"Post_userName__w0+By\",\"userPost\":\"Post_userPost__KjHI9\",\"userImage\":\"Post_userImage__MRTRj\"};","import React from 'react'\r\nimport s from './Post.module.css'\r\nimport {useSelector} from 'react-redux'\r\nimport { getProfile } from '../../../../selectors/profileSelector'\r\nimport preloaderImg from '../../../../images/preloader.gif'\r\nimport userDefaultImage from '../../../../images/user.png'\r\n\r\n\r\nlet MyPost = (props) => {\r\n\r\n    const profile = useSelector(getProfile)\r\n\r\n    let imgSrc;\r\n    let userName\r\n    if (!profile) {\r\n        imgSrc = preloaderImg\r\n        userName = 'some name'\r\n    } else if (!profile.photos.large) {\r\n        imgSrc = userDefaultImage\r\n    } else {\r\n        imgSrc = profile.photos.large\r\n        userName = profile.fullName\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={s.item}>\r\n            <img className={s.userImage} src={imgSrc}/>\r\n            <div className='usertext'>\r\n                <div className={s.userName}>{userName}</div>\r\n                <div className={s.userPost}>{props.message}</div>\r\n                <div>\r\n                    <span>like {props.likesCount}</span>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default MyPost;","import React from 'react'\r\nimport s from './Myposts.module.css'\r\nimport MyPost from './Post/Post'\r\n\r\n\r\n\r\nlet MyPosts = (props) => {\r\n\r\n    let posts = props.posts.map(el => <MyPost name={el.name} likesCount={el.likesCount} message={el.message}/>)\r\n    let newPostElement = React.createRef();\r\n    function addPost () {\r\n        props.addPost()\r\n        newPostElement.current.value = \" \";\r\n    }\r\n    function newPost () {\r\n        let text = newPostElement.current.value;\r\n        props.newPost(text)\r\n    }\r\n\r\n    return (\r\n        <div style={{width: 350}}>\r\n            <div>\r\n                My posts\r\n                <textarea onChange={newPost} ref={newPostElement} value={props.newPostText} />\r\n                <button onClick={addPost}>add post</button>\r\n            </div>\r\n            <div className={s.posts}>\r\n                {posts} \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default MyPosts;","\r\nimport { actions } from './../../../redux/profile-reducer.ts'\r\nimport MyPosts from './Myposts'\r\nimport {connect} from 'react-redux'\r\n\r\ntype userPostType = {\r\n    name: string\r\n    likesCount: number\r\n    message: string\r\n}\r\n\r\ntype mapStateToPropsType = {\r\n    store: any\r\n    newPostText: string\r\n    posts: userPostType[]\r\n}\r\ntype mapDispatchToPropsType = {\r\n    addPost: () => void\r\n    newPost: (text: string) => void\r\n}\r\nlet mapStateToProps = (state: any): mapStateToPropsType => {\r\n    return {\r\n        store: state.profilePage.postsData,\r\n        newPostText: state.profilePage.newPostText,\r\n        posts: state.profilePage.postsData\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch: any): mapDispatchToPropsType => {\r\n    return {\r\n        addPost: () => {dispatch(actions.addPostActionCreator())},\r\n        newPost: (text: string) => {dispatch(actions.newPostActionCreator(text))}\r\n    }\r\n}\r\n\r\nlet MyPostsContainer = connect<mapStateToPropsType, mapDispatchToPropsType> (mapStateToProps, mapDispatchToProps) (MyPosts) \r\n\r\nexport default MyPostsContainer;","import React from 'react'\r\nimport CurrentUserInfo from './currentUserInfo'\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer.tsx'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {savePhoto} from '../../redux/profile-reducer.ts'\r\nimport {useParams} from 'react-router-dom'\r\nimport { getProfile, getStatus } from '../../selectors/profileSelector'\r\nimport { updateStatusThunk } from '../../redux/profile-reducer.ts'\r\n\r\nexport let CurrentUser = () => {\r\n    let params = useParams()\r\n    const isOwner = !params.id\r\n\r\n    return (\r\n        <div>\r\n\r\n            <div className='currentUser'>\r\n                <CurrentUserInfo isOwner={isOwner}/>\r\n                <MyPostsContainer />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux';\r\n// @ts-ignore\r\nimport { getCurrentUserThunk, getStatusThunk, updateStatusThunk, savePhoto } from '../../redux/profile-reducer.ts';\r\nimport { CurrentUser } from './Profile'\r\nimport { useParams } from 'react-router-dom';\r\n// @ts-ignore\r\nimport { authAPI } from '../../api/api.ts';\r\nimport { WithAuthRedirect } from '../../hoc/AuthRedirect'\r\n// @ts-ignore\r\nimport { profileType } from '../../types/types.ts'\r\nimport { getIsAuth, getProfile, getStatus } from '../../selectors/profileSelector';\r\n\r\ntype mapStateToPropsType = {\r\n    profile: profileType\r\n    isAuth: boolean\r\n    status: string\r\n}\r\ntype mapDispatchToPropsType = {\r\n    getCurrentUserThunk: (id: number) => void\r\n    getStatusThunk: (id: number) => void\r\n    savePhoto: () => void\r\n    updateStatusThunk: () => void\r\n}\r\ntype propsType = mapStateToPropsType & mapDispatchToPropsType\r\n\r\nlet mapStateToProps = (state: any): mapStateToPropsType => {\r\n    return ({\r\n        profile: getProfile(state),\r\n        isAuth: getIsAuth(state),\r\n        status: getStatus(state),\r\n    })\r\n}\r\n\r\n\r\nlet CurrentUserContainer: React.FC<propsType> = (props) => {\r\n    let id: number;\r\n    let params = useParams()\r\n    useEffect(() => {\r\n        if (params.id) {\r\n            id = Number(params.id)\r\n            props.getCurrentUserThunk(id)\r\n            props.getStatusThunk(id)\r\n        } else {\r\n            authAPI.isUserAuth()\r\n                .then(response => {\r\n                    if (response.data.resultCode === 0) {\r\n\r\n                        id = response.data.data.id\r\n                        props.getCurrentUserThunk(id)\r\n                        props.getStatusThunk(id)\r\n                    }\r\n                })\r\n\r\n        }\r\n    }, [params.id])\r\n\r\n    return (\r\n\r\n        <div>\r\n            <CurrentUser savePhoto={props.savePhoto} {...props}\r\n                isOwner={!Number(params.id)}\r\n                profile={props.profile}\r\n                status={props.status}\r\n                updateStatus={props.updateStatusThunk}\r\n                isAuth={props.isAuth} />\r\n        </div>\r\n    )\r\n}\r\n\r\nlet DialogsContainer = connect<mapStateToPropsType, mapDispatchToPropsType>(mapStateToProps,\r\n     { getCurrentUserThunk, getStatusThunk, updateStatusThunk, savePhoto })(WithAuthRedirect(CurrentUserContainer))\r\n\r\nexport default DialogsContainer","import React from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nexport const WithAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Navigate to='/login/' />;\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n    return RedirectComponent\r\n}"],"names":["getProfile","state","profilePage","profile","getIsAuth","auth","isAuth","getStatus","status","ProfileStatus","props","dispatch","useDispatch","useSelector","useState","editMode","setEditMode","currentStatus","setStatus","useEffect","onChange","e","currentTarget","value","autoFocus","onBlur","updateStatusThunk","updateStatus","alert","onDoubleClick","isOwner","console","log","imgSrc","useParams","id","photos","large","userDefaultImage","preloaderImg","className","s","file","target","files","savePhoto","type","src","userName","fullName","message","likesCount","posts","map","el","name","newPostElement","React","style","width","text","current","newPost","ref","newPostText","onClick","addPost","connect","store","postsData","actions","MyPosts","CurrentUser","getCurrentUserThunk","getStatusThunk","WithAuthRedirect","params","Number","authAPI","then","response","data","resultCode","Component","RedirectComponent","this","to"],"sourceRoot":""}